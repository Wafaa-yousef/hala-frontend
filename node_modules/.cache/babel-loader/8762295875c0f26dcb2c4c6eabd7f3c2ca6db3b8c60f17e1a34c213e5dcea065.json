{"ast":null,"code":"import{useEffect,useState}from\"react\";import axios from\"axios\";import{io}from\"socket.io-client\";import\"./pricingList.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io(process.env.NODE_ENV===\"development\"?\"http://localhost:5000\":`${process.env.REACT_APP_API_URL}`);const PricingList=()=>{const[pricingData,setPricingData]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{let isMounted=true;async function fetchPricingData(){try{const res=await axios.get(`${process.env.REACT_APP_API_URL}/api/customer/pricingList`);if(isMounted){setPricingData(res.data);setLoading(false);}}catch(error){if(isMounted){console.error(\"Failed to fetch pricing list:\",error);setLoading(false);}}}fetchPricingData();socket.on(\"excel-updated\",()=>{console.log(\"Socket event: excel-updated received, refetching pricing data...\");fetchPricingData();});return()=>{isMounted=false;socket.off(\"excel-updated\");};},[]);if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading pricing data...\"});if(!pricingData.length)return/*#__PURE__*/_jsx(\"p\",{children:\"No pricing data available.\"});return/*#__PURE__*/_jsx(\"div\",{className:\"pricing-table-container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"pricing-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Warehouse\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Dry Storage Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Temp-Controlled Price\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:pricingData.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.warehouse}),/*#__PURE__*/_jsx(\"td\",{children:item.dryStoragePrice}),/*#__PURE__*/_jsx(\"td\",{children:item.tempControlledPrice})]},index))})]})});};export default PricingList;","map":{"version":3,"names":["useEffect","useState","axios","io","jsx","_jsx","jsxs","_jsxs","socket","process","env","NODE_ENV","REACT_APP_API_URL","PricingList","pricingData","setPricingData","loading","setLoading","isMounted","fetchPricingData","res","get","data","error","console","on","log","off","children","length","className","map","item","index","warehouse","dryStoragePrice","tempControlledPrice"],"sources":["C:/Users/ALAMEEN/Desktop/new-frontend/hala-frontend/src/components/pricingList/PricingList.js"],"sourcesContent":["import  { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { io } from \"socket.io-client\";\r\nimport \"./pricingList.css\";\r\n\r\nconst socket = io( process.env.NODE_ENV === \"development\"\r\n    ? \"http://localhost:5000\"\r\n    : `${process.env.REACT_APP_API_URL}`);\r\n\r\nconst PricingList = () => {\r\n  const [pricingData, setPricingData] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    async function fetchPricingData() {\r\n      try {\r\n        const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/customer/pricingList`);\r\n        if (isMounted) {\r\n          setPricingData(res.data);\r\n          setLoading(false);\r\n        }\r\n      } catch (error) {\r\n        if (isMounted) {\r\n          console.error(\"Failed to fetch pricing list:\", error);\r\n          setLoading(false);\r\n        }\r\n      }\r\n    }\r\n\r\n    fetchPricingData(); \r\n\r\n    socket.on(\"excel-updated\", () => {\r\n      console.log(\"Socket event: excel-updated received, refetching pricing data...\");\r\n      fetchPricingData();\r\n    });\r\n\r\n    return () => {\r\n      isMounted = false;\r\n      socket.off(\"excel-updated\");\r\n    };\r\n  }, []);\r\n\r\n  if (loading) return <p>Loading pricing data...</p>;\r\n  if (!pricingData.length) return <p>No pricing data available.</p>;\r\n\r\n  return (\r\n    <div className=\"pricing-table-container\">\r\n      <table className=\"pricing-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Warehouse</th>\r\n            <th>Dry Storage Price</th>\r\n            <th>Temp-Controlled Price</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {pricingData.map((item, index) => (\r\n            <tr key={index}>\r\n              <td>{item.warehouse}</td>\r\n              <td>{item.dryStoragePrice}</td>\r\n              <td>{item.tempControlledPrice}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PricingList;\r\n"],"mappings":"AAAA,OAAUA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC5C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,EAAE,KAAQ,kBAAkB,CACrC,MAAO,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3B,KAAM,CAAAC,MAAM,CAAGL,EAAE,CAAEM,OAAO,CAACC,GAAG,CAACC,QAAQ,GAAK,aAAa,CACnD,uBAAuB,CACvB,GAAGF,OAAO,CAACC,GAAG,CAACE,iBAAiB,EAAE,CAAC,CAEzC,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAE5CD,SAAS,CAAC,IAAM,CACd,GAAI,CAAAkB,SAAS,CAAG,IAAI,CAEpB,cAAe,CAAAC,gBAAgBA,CAAA,CAAG,CAChC,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAlB,KAAK,CAACmB,GAAG,CAAC,GAAGZ,OAAO,CAACC,GAAG,CAACE,iBAAiB,2BAA2B,CAAC,CACxF,GAAIM,SAAS,CAAE,CACbH,cAAc,CAACK,GAAG,CAACE,IAAI,CAAC,CACxBL,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAE,MAAOM,KAAK,CAAE,CACd,GAAIL,SAAS,CAAE,CACbM,OAAO,CAACD,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACrDN,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CACF,CAEAE,gBAAgB,CAAC,CAAC,CAElBX,MAAM,CAACiB,EAAE,CAAC,eAAe,CAAE,IAAM,CAC/BD,OAAO,CAACE,GAAG,CAAC,kEAAkE,CAAC,CAC/EP,gBAAgB,CAAC,CAAC,CACpB,CAAC,CAAC,CAEF,MAAO,IAAM,CACXD,SAAS,CAAG,KAAK,CACjBV,MAAM,CAACmB,GAAG,CAAC,eAAe,CAAC,CAC7B,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIX,OAAO,CAAE,mBAAOX,IAAA,MAAAuB,QAAA,CAAG,yBAAuB,CAAG,CAAC,CAClD,GAAI,CAACd,WAAW,CAACe,MAAM,CAAE,mBAAOxB,IAAA,MAAAuB,QAAA,CAAG,4BAA0B,CAAG,CAAC,CAEjE,mBACEvB,IAAA,QAAKyB,SAAS,CAAC,yBAAyB,CAAAF,QAAA,cACtCrB,KAAA,UAAOuB,SAAS,CAAC,eAAe,CAAAF,QAAA,eAC9BvB,IAAA,UAAAuB,QAAA,cACErB,KAAA,OAAAqB,QAAA,eACEvB,IAAA,OAAAuB,QAAA,CAAI,WAAS,CAAI,CAAC,cAClBvB,IAAA,OAAAuB,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAC1BvB,IAAA,OAAAuB,QAAA,CAAI,uBAAqB,CAAI,CAAC,EAC5B,CAAC,CACA,CAAC,cACRvB,IAAA,UAAAuB,QAAA,CACGd,WAAW,CAACiB,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,gBAC3B1B,KAAA,OAAAqB,QAAA,eACEvB,IAAA,OAAAuB,QAAA,CAAKI,IAAI,CAACE,SAAS,CAAK,CAAC,cACzB7B,IAAA,OAAAuB,QAAA,CAAKI,IAAI,CAACG,eAAe,CAAK,CAAC,cAC/B9B,IAAA,OAAAuB,QAAA,CAAKI,IAAI,CAACI,mBAAmB,CAAK,CAAC,GAH5BH,KAIL,CACL,CAAC,CACG,CAAC,EACH,CAAC,CACL,CAAC,CAEV,CAAC,CAED,cAAe,CAAApB,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}